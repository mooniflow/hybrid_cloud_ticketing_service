<!-- register.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - Ticketing App</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://team3test99.s3.ap-northeast-2.amazonaws.com/styles/styles.css">
    <script>
        function validateEmail() {
            var emailInput = document.getElementById('email');
            var emailValue = emailInput.value;

            // 간단한 이메일 주소 유효성 검사 (여기서는 '@'와 '.'이 포함되어야 함)
            if (!emailValue.includes('@') || !emailValue.includes('.')) {
                alert('올바른 이메일 주소를 입력하세요.');
                return false;
            }

            return true;
        }
    </script>    
</head>
<body>
    {% extends 'base.html' %}

    {% block title %}Ticketing App{% endblock %}
    
    {% block content %}
    <div class="container mx-auto">
        <h1 class="mt-4">회원가입</h1>
        <form method="POST" onsubmit="return validateEmail();">
            {{ form.hidden_tag() }}
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <div class="alert alert-danger">
                        {{ messages[0] }}
                    </div>
                {% endif %}
            {% endwith %}
            <div class="form-group">
                <label for="name">이름</label>
                {{ form.name(class="form-control") }}
            </div>
            <div class="form-group">
                <label for="username">아이디</label>
                {{ form.username(class="form-control") }}
                {% if form.username.errors %}
                    <div class="alert alert-danger">
                        {{ form.username.errors[0] }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="password">비밀번호</label>
                {{ form.password(class="form-control") }}
                {% if form.password.errors %}
                    <div class="alert alert-danger">
                        {{ form.password.errors[0] }}
                    </div>
                {% endif %}
            </div>
            <div class="form-group">
                <label for="password_confirm">비밀번호 확인</label>
                {{ form.password_confirm(class="form-control") }}
                {% if form.password_confirm.errors %}
                    <div class="alert alert-danger">
                        {{ form.password_confirm.errors[0] }}
                    </div>
                {% endif %}
            </div>            
            <div class="form-group">
                <label for="email">이메일</label>
                {{ form.email(class="form-control") }}
            </div>
            <div class="form-group">
                <label for="address">주소</label>
                {{ form.address(class="form-control") }}
            </div>
            <div class="form-group">
                <label for="phone">전화번호</label>
                {{ form.phone(class="form-control") }}
            </div>
            <div class="form-group">
                <label for="card_number">카드 번호</label>
                {{ form.card_number(class="form-control") }}
            </div>
            <div class="form-group">
                <label for="expiration_date">만료일 (MM/YY)</label>
                {{ form.expiration_date(class="form-control") }}
            </div>
            <div class="form-group">
                <label for="cvv">CVV</label>
                {{ form.cvv(class="form-control") }}
            </div>
            <button type="submit" class="btn btn-dark">회원가입</button>
        </form>
        <p class="mt-3">이미 계정이 있으신가요? <a href="{{ url_for('login') }}">로그인</a></p>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    {% endblock %}
</body>
</html>
